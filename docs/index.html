<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Install FLACloader Bookmarklet</title>
    <style>
      body {
        font-family: sans-serif;
        padding: 40px;
        background: #111;
        color: #eee;
      }
      a.bookmarklet {
        display: inline-block;
        padding: 10px 20px;
        background: #2288ff;
        color: white;
        font-weight: bold;
        text-decoration: none;
        border-radius: 8px;
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <h1>ðŸŽµ FLACloader Bookmarklet</h1>
    <p>Drag the button below to your bookmarks bar:</p>
    <a class="bookmarklet" href="javascript:(function(){(async()=>{const e=e=>new Promise((n=>setTimeout(n,e))),n=document.createElement(&quot;style&quot;);n.textContent=&quot;\n    #flac-helper-container {\n      position: fixed;\n      top: 60px;\n      right: 20px;\n      z-index: 99999;\n      background: #000000;\n      border: 1px solid #222;\n      box-shadow: 0 2px 10px rgba(0,0,0,0.8);\n      max-height: 80vh;\n      overflow-y: auto;\n      width: 360px;\n      font-family: sans-serif;\n      padding: 10px;\n      border-radius: 8px;\n      color: #eee;\n      /* Remove overflow: hidden to allow scrolling */\n    }\n    #flac-helper-container h2 {\n      font-size: 16px;\n      margin-bottom: 10px;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      color: #aad4ff;\n      position: relative;\n      z-index: 10;\n    }\n    #flac-helper-close {\n      cursor: pointer;\n      font-weight: bold;\n      font-size: 16px;\n      border: none;\n      background: none;\n      color: #aad4ff;\n      position: relative;\n      z-index: 10;\n    }\n    #flac-helper-container button {\n      margin: 5px 5px 10px 0;\n      padding: 6px 10px;\n      font-size: 13px;\n      cursor: pointer;\n      background: #112244;\n      border: 1px solid #224488;\n      color: #aad4ff;\n      border-radius: 4px;\n      position: relative;\n      z-index: 10;\n      transition: background 0.3s ease;\n    }\n    #flac-helper-container button:hover {\n      background: #224488;\n    }\n    #flac-helper-list {\n      display: flex;\n      flex-direction: column;\n      gap: 6px;\n      position: relative;\n      z-index: 10;\n    }\n    .flac-helper-item {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 4px;\n      border-bottom: 1px solid #222;\n      color: #ccc;\n      position: relative;\n      z-index: 10;\n    }\n    .flac-helper-item img {\n      width: 60px;\n      height: 34px;\n      object-fit: cover;\n      background: #111;\n      border-radius: 4px;\n    }\n    .flac-helper-title {\n      flex: 1;\n      font-size: 13px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      color: #aad4ff;\n    }\n    #flac-helper-loading {\n      font-size: 13px;\n      margin-bottom: 10px;\n      color: #666;\n      position: relative;\n      z-index: 10;\n    }\n    #radial-blur-canvas {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      pointer-events: none;\n      z-index: 0;\n      border-radius: 8px;\n    }\n  &quot;,document.head.appendChild(n);const t=document.createElement(&quot;div&quot;);t.id=&quot;flac-helper-container&quot;;const o=document.createElement(&quot;canvas&quot;);o.id=&quot;radial-blur-canvas&quot;,t.appendChild(o);const i=document.createElement(&quot;div&quot;);i.id=&quot;flac-helper-content-wrapper&quot;,i.style.position=&quot;relative&quot;,i.style.zIndex=&quot;10&quot;,i.style.overflowY=&quot;auto&quot;,i.style.maxHeight=&quot;80vh&quot;,i.style.height=&quot;100%&quot;,i.style.padding=&quot;10px&quot;,t.appendChild(i);const l=o.getContext(&quot;2d&quot;);function c(){o.width=t.clientWidth,o.height=t.clientHeight}c(),window.addEventListener(&quot;resize&quot;,c);let r=o.width/2,a=o.height/2,d=r,p=a;t.addEventListener(&quot;mousemove&quot;,(e=>{const n=o.getBoundingClientRect();d=e.clientX-n.left,p=e.clientY-n.top})),function e(){r+=.02*(d-r),a+=.02*(p-a),l.clearRect(0,0,o.width,o.height);const n=l.createRadialGradient(r,a,50,r,a,200);n.addColorStop(0,&quot;rgba(0, 120, 255, 0.4)&quot;),n.addColorStop(1,&quot;rgba(0, 0, 0, 0)&quot;),l.fillStyle=n,l.fillRect(0,0,o.width,o.height),requestAnimationFrame(e)}();const s=document.createElement(&quot;h2&quot;);s.innerText=&quot;ðŸŽµ FLACloader - YT&quot;;const h=document.createElement(&quot;button&quot;);h.id=&quot;flac-helper-close&quot;,h.textContent=&quot;âœ•&quot;,h.onclick=()=>t.remove(),s.appendChild(h),i.appendChild(s);const u=document.createElement(&quot;div&quot;);u.id=&quot;flac-helper-loading&quot;,u.textContent=&quot;ðŸ”„ Loading full playlist...&quot;,i.appendChild(u),document.body.appendChild(t);const m=new Map,f=()=>{const e=document.querySelectorAll(&quot;#items ytd-playlist-panel-video-renderer&quot;);for(let n of e){const e=n.querySelector(&quot;a#wc-endpoint&quot;);if(!e)continue;const t=e.getAttribute(&quot;href&quot;),o=t?.match(/v=([^&]+)/);if(!o)continue;const i=o[1];if(m.has(i))continue;const l=&quot;https://www.youtube.com&quot;+t.split(&quot;&&quot;)[0],c=n.querySelector(&quot;#video-title&quot;),r=c?.getAttribute(&quot;title&quot;)?.trim()||&quot;Untitled&quot;,a=n.querySelector(&quot;#thumbnail img&quot;);let d=&quot;&quot;;if(a?.src?.startsWith(&quot;data:&quot;)||!a?.src){d=`https://i.ytimg.com/vi/${i}/hqdefault.jpg`}else d=a.src;m.set(i,{url:l,title:r,img:d})}},x=(document.querySelector(&quot;#items&quot;),async(n=&quot;down&quot;)=>{let t=-1,o=&quot;&quot;,i=0;for(;;){const l=document.querySelectorAll(&quot;#items ytd-playlist-panel-video-renderer&quot;);if(!l.length)break;const c=l[&quot;down&quot;===n?l.length-1:0];f(),c.scrollIntoView({behavior:&quot;smooth&quot;,block:&quot;center&quot;}),await e(300);const r=c.querySelector(&quot;a#wc-endpoint&quot;),a=r?.getAttribute(&quot;href&quot;);if(a===o){if(i++,i>=2)break}else o=a,r?.click(),await e(2e3),f(),t=l.length,i=0}});await x(&quot;down&quot;),await x(&quot;up&quot;);const g=Array.from(document.querySelectorAll(&quot;#items ytd-playlist-panel-video-renderer&quot;));for(let n of g)n.scrollIntoView({behavior:&quot;instant&quot;,block:&quot;center&quot;}),await e(30);f(),u.remove();const b=document.createElement(&quot;button&quot;);b.textContent=&quot;Select All&quot;;const y=document.createElement(&quot;button&quot;);y.textContent=&quot;Deselect All&quot;;const v=document.createElement(&quot;button&quot;);v.textContent=&quot;ðŸ“¥ Download Selected (FLAC)&quot;,i.appendChild(b),i.appendChild(y),i.appendChild(v);const w=document.createElement(&quot;div&quot;);w.id=&quot;flac-helper-list&quot;,i.appendChild(w);const C=Array.from(m.values());C.forEach(((e,n)=>{const t=document.createElement(&quot;div&quot;);t.className=&quot;flac-helper-item&quot;;const o=document.createElement(&quot;input&quot;);o.type=&quot;checkbox&quot;,o.dataset.index=n,o.checked=!0;const i=document.createElement(&quot;img&quot;);i.src=e.img;const l=document.createElement(&quot;div&quot;);l.className=&quot;flac-helper-title&quot;,l.textContent=e.title,t.appendChild(o),t.appendChild(i),t.appendChild(l),w.appendChild(t)})),b.onclick=()=>{w.querySelectorAll(&quot;input[type='checkbox']&quot;).forEach((e=>e.checked=!0))},y.onclick=()=>{w.querySelectorAll(&quot;input[type='checkbox']&quot;).forEach((e=>e.checked=!1))},v.onclick=()=>{const e=Array.from(w.querySelectorAll(&quot;input[type='checkbox']&quot;)).filter((e=>e.checked)).map((e=>C[parseInt(e.dataset.index)].url));if(!e.length)return void alert(&quot;Please select at least one video.&quot;);const n=new Blob([JSON.stringify(e.map((e=>({url:e}))),null,2)],{type:&quot;application/json&quot;}),t=document.createElement(&quot;a&quot;);t.href=URL.createObjectURL(n),t.download=`PlaylistDownloader_${Date.now()}.json`,t.click()}})();}());">FLACloader - YT</a>
      </body>
</html>
